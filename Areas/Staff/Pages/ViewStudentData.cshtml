@page
@model StudentPortfolio.Areas.Staff.Pages.ViewStudentDataModel
@{
    ViewData["Title"] = "View Data";
}

<form method="get">
    <input type="hidden" name="userName" value="@Model.UserName" />

    <label for="select-year" class="form-label fw-bold">Select year</label>
    <select id="select-year" class="form-select form-select-sm w-auto" name="selectedYear" style="margin-bottom: 10px;" onchange="this.form.submit()">
        <option disabled>Select year</option>
        
        @foreach (var year in Model.AvailableYears)
        {
            <option value="@year" selected="@(Model.selectedYear == year)">@year</option>
        }
    </select>
</form>

<div class="btn-group" role="group" aria-label="Basic example">
    <button type="button" class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#profileContainer" aria-expanded="false" aria-controls="profileContainer">Profile</button>
    <button type="button" class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#cdpContainer" aria-expanded="false" aria-controls="cdpContainer">Career Development Plan</button>
    <button type="button" class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#goalContainer" aria-expanded="false" aria-controls="goalContainer">SMART Goals</button>
    <button type="button" class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#networkingContainer" aria-expanded="false" aria-controls="networkingContainer">Networking</button>
    <button type="button" class="btn btn-outline-primary" data-bs-toggle="collapse" data-bs-target="#competencyContainer" aria-expanded="false" aria-controls="competencyContainer">Competencies</button>
</div>

<div class="collapse" id="profileContainer">
    <div class="mt-3">
        @if (Model.ProfileData != null)
        {
            <partial name="_Profile" model="Model.ProfileData" />
        }
    </div>
</div>

<div class="collapse" id="cdpContainer">
    <div class="mt-3">
        @if (Model.CDP != null)
        {
            <partial name="_CareerDevelopmentPlan" model="Model.CDP" />
        }
        else
        {
            <div class="alert alert-info" role="alert">
                No Career Development Plan found for the selected year.
            </div>
        }
    </div>
</div>

<div class="collapse" id="goalContainer">
    <div class="mt-3">
        @if (Model.GoalsData != null && Model.GoalsData.GoalData.Any())
        {
            <partial name="_SmartGoals" model="Model.GoalsData" />
        }
        else 
        {
            <div class="alert alert-info" role="alert">
                No Goals found for the selected year.
            </div>
        }
    </div>
</div>

<div class="collapse" id="networkingContainer">
    <div class="mt-3">
        @if (Model.NetworkingData != null && Model.NetworkingData.NetworkingEvents.Any())
        {
            <partial name="_Networking" model="Model.NetworkingData" />
        }
        else 
        {
            <div class="alert alert-info" role="alert">
                No Networking Data found.
            </div>
        }
    </div>
</div>

<div class="collapse" id="competencyContainer">
    <div class="mt-3">
        @if (Model.CompetencyData != null && Model.CompetencyData.CompetencyTrackers.Any())
        {
            <partial name="_Competencies" model="Model.CompetencyData" />
        }
        else
        {
            <div class="alert alert-info" role="alert">
                No Competency Data found.
            </div>
        }
    </div>
</div>


