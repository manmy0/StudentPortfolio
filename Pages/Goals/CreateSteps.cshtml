@page
@model StudentPortfolio.Pages.Goals.CreateStepsModel

@{
    ViewData["Title"] = "CreateSteps";
}

<h1>CreateSteps</h1>

<h4>GoalStep</h4>
<hr />

<form method="post">
    <div id="stepContainer">
        @for (int i = 0; i < Model.GoalSteps.Count; i++)
        {
            <div class="item-row">
                <input asp-for="GoalSteps[i].Step" />
            </div>
        }
    </div>

    <button type="button" id="addRowButton">Add Another Step</button>
    <button type="submit">Save All Steps</button>
</form>

<div>
    <a asp-page="Goals">Back to Goals</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
   
    <script>
        document.getElementById('addRowButton').addEventListener('click', function () {
            const container = document.getElementById('stepContainer');
            const index = container.children.length; // Get the next index

            const newRow = document.createElement('div');
            newRow.classList.add('item-row');
            newRow.innerHTML = `
                <input name="GoalSteps[${index}].step" />
            `;
            container.appendChild(newRow);
        });
    </script>
}
